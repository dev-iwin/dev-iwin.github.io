---
layout: single
title:  "웹 프로그래밍의 이해 02 - HTTP"
---

*책 <Django로 배우는 쉽고 빠른 웹 개발, 파이썬 웹 프로그래밍> 1단원 내용을 복습 겸 정리하며...*

## HTTP(Hyoertext Transfer Protocol) 프로토콜

* 웹 서버와 웹 클라이언트 사이에서 데이터를 주고받기 위해 사용하는 통신 방식으로, [TCP/IP 프로토콜 위에서 동작한다(?)](https://asfirstalways.tistory.com/85). 즉, 웹을 이용하기 위해선 웹 서버와 웹 클라이언트는 각각 TCP/IP 동작에 필수적인 IP주소를 가져야 한다는 의미다.
* 이름은 하이퍼텍스트 전송용 프로토콜이지만, 실제로는 컴퓨터에서 다룰 수 있는 데이터라면 무엇이든 전송할 수 있다(HTML이나 XML과 같은 하이퍼텍스트뿐만 아니라 이미지, 음성, 동영상, 자바스크립트, PDF와 각종 오피스 도큐먼트 파일 등).
* 아래와 같은 방식으로 요청/응답 메시지가 반복적으로 오가며 웹을 사용한다.
  예를 들어, 사용자가 웹 브라우저의 주소창에 주소를 입력하고 엔터를 누르면,
  1. 웹 클라이언트 ↔ 웹 서버 : HTTP 연결이 맺어짐
  2. 웹클라이언트 → 웹 서버 : HTTP 요청 메시지 전송
  3. 웹 서버 : 요청에 따른 처리 진행
  4. 웹 서버 → 웹 클라이언트 : HTTP 응답 메시지 전송

## HTTP 메시지의 구조

### 종류

* 요청request 메시지  : 웹클라이언트 → 웹 서버
* 응답response 메시지 : 웹 서버 → 웹 클라이언트 

### 구조

1. 스타트 라인(Start Line)
   * 요청 메시지일 땐, 요청 라인 : 요청방식(method : GET 등), 요청 URL, 프로토콜 버전
   * 응답 메시지일 땐, 응답 라인 : 프로토콜 버전, 상태 코드와 상태 텍스트(서버에서의 처리 결과를 표시)
2. 헤더(Header)
   * 생략 가능한 부분. 각 행 끝에 줄 바꿈 문자인 CRLF(Carriage Return Line Feed)가 있음
   * **'이름:값'** 형식으로 표현하며 여러줄 가능
   * Host 항목은 필수 인데, 요청라인의 URL에 Host를 표시한 경우에는 Host 헤더는 생략해도 됨
   * 포트번호를 표시할 땐 Host 항목에 같이 표시함(Host 헤더든 요청라인의 URL이든)
3. 빈 줄(Blank Line) : 헤더와 바디를 구분하기 위해 존재
4. 바디(Body) : 생략 가능한 부분. 텍스트뿐 아니라 바이너리 데이터도 들어갈 수 있음

### 예시

1. 바디가 없는 요청 메시지

```
GET /book/shakespeare HTTP/1.1
HOST: www.example.com:8080
```

요청 라인 : 요청방식(method : GET 등), 요청 URL, 프로토콜 버전
헤더 : Host 항목이 이름: 값 형식을 취하고 있으며, 포트번호 지정을 위해 Host 항목에 함께 적음

```
GET http://www.example.com:8080/book/shakespeare HTTP/1.1
```

Host 항목을 URL에 표시하면서 헤더를 생략함. 역시나 포트번호는 Host 항목에 함께 적음(URL 앞에)

2. 응답 메시지

```
HTTP/1.1 200 OK
Content-Type: application/xhtml+xml; charset=utf-8

<html>
...
</html>
```

응답 라인 : 프로토콜 버전, 상태 코드(200)와 상태 텍스트(OK) (서버에서 정상적으로 처리됨을 표시)
헤더 : 위 예시는 Content-Type 항목 하나만 들어간 경우이고, 여러 항목의 헤더도 가능
빈 줄 : 바디와 구분을 위해 삽입됨
바디 : 보통을 HTML 텍스트가 포함되어 있음

## HTTP 처리 방식

HTTP 메소드(Method)를 통해 클라이언트가 원하는 처리 방식을 서버에 알린다. 메소드는 8가지로 정의되어 있는데, 그 중에 많이 사용되는 메소드는 GET, POST, PUT, DELETE 이며, 데이터 조작의 기본이 되는 CRUD와 매핑되는 처리를 한다.

| 메소드명 | 의미                             | CRUD와 매핑  |
| -------- | -------------------------------- | ------------ |
| GET      | 리소스 취득                      | READ(조회)   |
| POST     | 리소스 생성, 리소스 데이터 추가  | CREAT(생성)  |
| PUT      | 리소스 변경 (생성도 가능)        | UPDATE(변경) |
| DELETE   | 리소스 삭제                      | DELETE(삭제) |
| HEAD     | 리소스의 헤더(메타데이터) 취득   |              |
| OPTIONS  | 리소스가 서포트하는 메소드 취득  |              |
| TRACE    | 루프백 시험에 사용               |              |
| CONNECT  | 프록시 동작의 터널 접속으로 변경 |              |

### GET

1. 지정한 URL의 정보를 가져오는 메소드
2. 가장 많이 사용됨 : 웹 브라우저를 이용해 서버로부터 웹 페이지, 이미지, 동영상 등을 가져오려고 할 때 수많은 GET 요청을 사용함

### POST

1. 리소스를 생성하는 것이 대표적인 기능
   : 새롭게 생성한 리소스에 대한 URL 결정권이 서버 측에 있을 때  POST가 사용됨
   ex) 트위터에 글을 트윗하면 그 글의 URL은 서버에서 결정하는 경우

### PUT

1. 리소스를 변경하는 데 사용
   ex) 블로그에서 글의 작성자를 변경하거나 글의 내용을 업데이트하는 경우 등
2. 리소스를 생성하는 데 사용
   : 클라이언트가 결정한 타이틀이 그대로 URL이 되는 경우, PUT이 적합함
   ex) 위키

### DELETE

1. 이름 그대로 리소스를 삭제하는 메소드
2. 일반적으로 DELETE 요청에 대한 응답은 바디를 반환하지 않음

> 블로그 내 관련 글 : [GET과 POST](https://dev-iwin.github.io/2021-01-28-GET-POST)

## 상태 코드

응답 메시지의 상태라인에 있는 상태 코드(Status Code)를 보면 서버의 처리 결과를 알 수 있다. 상태 코드는 세 자리 숫자로 되어 있는데, 첫 번째 숫자는 HTTP 응답의 종류를 구분하는 데, 나머지 두 개의 숫자는 세부적인 응답 내용의 구분에 사용한다. 현재 100~500번대 상태 코드가 정의되어 있다.

| 상태 코드 | 의미                          | 서버 측면에서의 의미                                         |
| --------- | ----------------------------- | ------------------------------------------------------------ |
| 1xx       | 정보 제공(Informational)      | 일시적인 응답으로, 현재 클라이언트의 요청까지 처리되었으니<br />계속 진행하라는 의미로 HTTP/1.1 버전부터 추가됨 |
| 2xx       | 성공(Success)                 | 클라이언트의 요청이 서버에서 성공적으로 처리되었다는 의미    |
| 3xx       | 리다이렉션(Redirection)       | 완전한 처리를 위해 추가적인 동작을 필요로 하는 경우를 의미.<br />주로 서버의 주소 또는 요청한 URL의 웹 문서가 이동되었으니,<br />그 주소로 다시 시도해보라는 의미 |
| 4xx       | 클라이언트 에러(Client Error) | 클라이언트의 요청 메시지 내용이 잘못된 경우를 의미.<br />없는 페이지를 요청한 경우가 대표적인 사례 |
| 5xx       | 서버 에러(Sever Error)        | 서버 측 사정에 의해 메시지 처리에 문제가 발생한 경우를 의미<br />서버의 부하, DB 처리 과정의 오류, 서버에서 예외 발생 등이 해당 |

